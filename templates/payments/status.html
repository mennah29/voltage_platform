{% extends 'base.html' %}

{% block title %}ุญุงูุฉ ุงูุฏูุน{% endblock %}

{% block content %}
<div class="container" style="padding: 60px 0;">
    <div style="max-width: 500px; margin: 0 auto;">
        <div class="card" style="text-align: center; padding: 50px;">

            {% if order.status == 'paid' %}
            <!-- Payment Success -->
            <div
                style="width: 100px; height: 100px; background: var(--success); border-radius: 50%; margin: 0 auto 30px; display: flex; align-items: center; justify-content: center;">
                <span style="font-size: 3rem;">โ</span>
            </div>
            <h2 style="color: var(--success); margin-bottom: 15px;">ุชู ุชุฃููุฏ ุงูุฏูุน! ๐</h2>
            <p style="color: var(--text-muted); margin-bottom: 30px;">
                ุงููุญุงุถุฑุฉ ูุชุงุญุฉ ูู ุงูุขู
            </p>
            <a href="{% url 'courses:lecture_detail' order.lecture.id %}" class="btn btn-primary" style="width: 100%;">
                ๐ ุงุจุฏุฃ ุงููุดุงูุฏุฉ ุงูุขู
            </a>

            {% elif order.status == 'pending' %}
            <!-- Payment Pending -->
            <div
                style="width: 100px; height: 100px; background: var(--warning); border-radius: 50%; margin: 0 auto 30px; display: flex; align-items: center; justify-content: center;">
                <span style="font-size: 3rem;">โณ</span>
            </div>
            <h2 style="color: var(--warning); margin-bottom: 15px;">ูู ุงูุชุธุงุฑ ุชุฃููุฏ ุงูุฏูุน</h2>

            <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 12px; margin-bottom: 30px;">
                <p style="color: var(--text-muted); margin-bottom: 5px;">ุงูููุฏ ุงููุฑุฌุนู</p>
                <p style="font-size: 2rem; font-weight: 700; color: var(--accent-cyan); letter-spacing: 5px;">
                    {{ order.reference_code }}
                </p>
            </div>

            <p style="color: var(--text-muted); margin-bottom: 20px; font-size: 0.95rem;">
                {% if wallet %}
                ูู ุฏูุนุช ุจุงููุนูุ ุงูุชุธุฑ ุงูุชุฃููุฏ.<br>
                ุงููุญุงุถุฑุฉ ูุชุชูุนู ุฎูุงู ุณุงุนุงุช ููููุฉ.
                {% else %}
                ูุฑุฌู ุฅุชูุงู ุงูุฏูุน.
                {% endif %}
            </p>

            <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px; margin-bottom: 30px;">
                <p style="font-size: 0.9rem; color: var(--text-muted);">
                    <strong>ุงููุจูุบ:</strong> {{ order.amount }} ุฌููู<br>
                    <strong>ุงููุญุงุถุฑุฉ:</strong> {{ order.lecture.title }}
                </p>
            </div>

            <button onclick="location.reload()" class="btn btn-outline" style="width: 100%; margin-bottom: 15px;">
                ๐ ุชุญุฏูุซ ุงูุญุงูุฉ
            </button>

            <a href="{% url 'payments:initiate_payment' order.lecture.id %}" class="btn btn-primary"
                style="width: 100%;">
                ๐ ุนุฑุถ ุชูุงุตูู ุงูุฏูุน
            </a>

            {% else %}
            <!-- Payment Expired/Failed -->
            <div
                style="width: 100px; height: 100px; background: var(--text-muted); border-radius: 50%; margin: 0 auto 30px; display: flex; align-items: center; justify-content: center;">
                <span style="font-size: 3rem;">โ</span>
            </div>
            <h2 style="margin-bottom: 15px;">ุงูุทูุจ ููุบู</h2>
            <p style="color: var(--text-muted); margin-bottom: 30px;">
                ููููู ุฅูุดุงุก ุทูุจ ุฏูุน ุฌุฏูุฏ
            </p>
            <a href="{% url 'payments:initiate_payment' order.lecture.id %}" class="btn btn-primary"
                style="width: 100%;">
                ๐ณ ุทูุจ ุฏูุน ุฌุฏูุฏ
            </a>
            {% endif %}

        </div>

        <div style="text-align: center; margin-top: 20px;">
            <a href="{% url 'courses:chapter_list' %}" style="color: var(--accent-cyan);">
                โ ุงูุนูุฏุฉ ูููุญุงุถุฑุงุช
            </a>
        </div>
    </div>
</div>
{% endblock %}